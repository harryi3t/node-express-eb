# Language setting
language: node_js

# Version number
node_js:
  - "5.3"

env:
  global:
    - secure: aWBCyUuUTLvrcOdmPKetVvwlBwTyyQ95bvU29EH6+LWvIFbM4v9hmqOhtuwPf2PTZM2FnKFmcI6zbpIYTogKG2vgcgrX8UACgGDOKxhxnXMJNY1NMXxIUJXmbsjrLWZCxqJwq+sLUzcRuaiAolQ3dFd+2vUCXYSzQqGPHpod9lHDlekAiThQll2UzreqtG5SCsy4SusMlg6itceOToZq6MhcvO/lKeyyTPP4KD+MqIEJbXMEclpEwBohIYM2uOV2U22R4y8Db8+lDqB8e5x/GlYEQwMlJ9M9ZsXfFNsDe79AXL7jcA13tIsQSDPLGO48hnJyiiTtoQG8SvvReFnkCA==
    - secure: KYL2d0b6XxvkcAl+Jcp/63oYueU/vMAUubAfbQgbg8g8BqMkrvAw6zz8ftzoTw6lkYZrRECbJBVsXaTwjscRvzup5a4KJKqnEXrpSYqfnQHGqzMRdyvos7ekW+t3BuF+zx+uPCRI9hyWUS2+GkrcLKMsFu6wSZtHbgQakcQ09syw64oHH4hClSRGiz+2134lP5S+PjTSVNhpuDBZ4YPwiHhz2pUJwFA2MlDjB1JWQhZm6jmpml5vJCYP+Re0K9XAcJHzXaMBoyP5cT3HCfRKm4WBrcjTnwTdU2PEQESJj7FJ9xGvNMwc43K7L/dL4JZGiRk/khotd+K/Kg8AiGX6jw==

build:
  pre_ci_boot:
    image_name: drydock/u14nod
    image_tag: prod
    pull: false

  ci:
    - node --version
    - pip install awsebcli
  post_ci:
    - cd /root/src/github.com/ttrahan/node-express-eb
    - eb deploy

integrations:
  notifications:
    - type: slack
      integrationName: Slack-Test
      recipients: 
        - "#harryi3t"
        - "#testIssues"
  deploy:
    - platform_type: docker
      application_name: "node-test-app-shippable"
      s3_bucket_name: "node-test-bucket"
      env_name: "nodetestapp-1"
      region: "us-east-1"
